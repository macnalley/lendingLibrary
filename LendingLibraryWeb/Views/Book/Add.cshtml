@model BookModel

@* @{
    ViewData["Title"] = "Add Book";
} *@

<h1>Add a Book</h1>

@if (Model != null)
{
    if (Model.ErrorMessage.Length > 0)
    {
        <p class="text-warning">@Model.ErrorMessage</p>
    }
}

<form method="post" asp-action="Add">
    <div class="form-group">
        <label asp-for="Isbn10" class="control-label font-weight-bold">ISBN-10</label>
        <input asp-for="Isbn10" class="form-control" id="isbn10" maxlength="10"/>
        <span asp-validation-for="Isbn10" class="text-warning"></span>
        <button onclick="GetInfoIsbn('isbn10')" class="btn btn-primary" type="reset">Get Info</a>
    </div>
    <div class="form-group">
        <label asp-for="Isbn13" class="control-label font-weight-bold">ISBN-13</label>
        <input asp-for="Isbn13" class="form-control" id="isbn13" maxlength="13" />
        <span asp-validation-for="Isbn13" class="text-warning"></span>
        <button onclick="GetInfoIsbn('isbn13')" class="btn btn-primary" type="reset">Get Info</a>
    </div><div class="form-group">
        <label asp-for="Title" class="control-label font-weight-bold">Title</label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-warning"></span>
    </div>
    <div class="form-group">
        <label asp-for="Author" class="control-label font-weight-bold">Author</label>
        <input asp-for="Author" class="form-control" />
        <span asp-validation-for="Author" class="text-warning"></span>
    </div>
    <div>
        @if (Model != null)
        {
            <img src=@Model.CoverUrl />
        } 
    </div>
</form>

 
<script type="text/javascript" >
    function GetInfoIsbn(btnId) {
        let isbn = document.getElementById(btnId).value;
        window.location.href = `/Book/GetInfoByIsbn?isbn=${isbn}`;
    };
</script>